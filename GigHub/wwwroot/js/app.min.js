var AttendanceService=function(){var n=function(n,t,i){$.post("/api/attendances",{gigId:n}).done(t).fail(i)},t=function(n,t,i){$.ajax({url:"/api/attendances/"+n,method:"DELETE"}).done(t).fail(i)};return{createAttendance:n,deleteAttendance:t}}(),FollowingService=function(){var n=function(n,t,i){$.post("/api/followings",{followeeId:n}).done(t).fail(i)},t=function(n,t,i){$.ajax({url:"/api/followings/"+n,method:"DELETE"}).done(t).fail(i)};return{createFollowing:n,deleteFollowing:t}}(),NotificationService=function(){var n=function(n){$.getJSON("/api/notifications/getNewNotifications",n)};return{getNew:n}}(),GigsController=function(n){var t,i=function(n){alert(n.responseJSON)},r=function(){var n=t.text()==="Going"?"Going ?":"Going";$(t).toggleClass("btn-info").toggleClass("btn-default").text(n)},u=function(u){t=$(u.target);var f=t.attr("data-gig-id");t.hasClass("btn-default")?n.createAttendance(f,r,i):n.deleteAttendance(f,r,i)},f=function(n){$(n).on("click",".js-toggle-attendance",u)};return{init:f}}(AttendanceService),GigDetailsController=function(n){var t,i=function(){var n=t.text()==="Follow"?"Following":"Follow";t.toggleClass("btn-info").toggleClass("btn-default").text(n)},r=function(n){alert(n.responseJSON)},u=function(u){t=$(u.target);var f=t.attr("data-user-id");t.hasClass("btn-default")?n.createFollowing(f,i,r):n.deleteFollowing(f,i,r)},f=function(){$(".js-toggle-follow").click(u)};return{init:f}}(FollowingService),Notifications=function(n){var t=function(){$(".js-notifications-count").text("").addClass("hide")},i=function(){alert("Failed to mark as read!")},r=function(n){if(n.length!==0){$(".js-notifications-count").text(n.length).removeClass("hide").addClass("animated bounceInDown");$(".notifications").popover({html:!0,title:"Notifications",content:function(){const t=$("#notification-template").html(),i=_.template(t);return i({notifications:n})},placement:"bottom",template:'<div class="popover popover-notifications" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'}).on("show.bs.popover",function(){$.post("/api/notifications/markAsRead").done(t).fail(i)})}},u=function(){n.getNew(r)};return{getNew:u}}(NotificationService);